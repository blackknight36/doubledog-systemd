<%#
This file is part of the doubledog-systemd Puppet module.
Copyright 2019 John Florian
SPDX-License-Identifier: GPL-3.0-or-later
-%>
[Unit]
Description=automount <%= @mnt_description %>
<% if @mnt_requires -%>
<% if @mnt_requires.is_a?(Array) -%>
Requires=<%= @mnt_requires.join(' ') %>
<% else -%>
Requires=<%= @mnt_requires %>
<% end -%>
<% end -%>
<% if @mnt_before -%>
<% if @mnt_before.is_a?(Array) -%>
Before=<%= @mnt_before.join(' ') %>
<% else -%>
Before=<%= @mnt_before %>
<% end -%>
<% end -%>
<% if @mnt_after -%>
<% if @mnt_after.is_a?(Array) -%>
After=<%= @mnt_after.join(' ') %>
<% else -%>
After=<%= @mnt_after %>
<% end -%>
<% end -%>

[Automount]
Where=<%= @mnt_where %>

<% if @enable -%>
[Install]
<% if @mnt_wantedby -%>
<% if @mnt_wantedby.is_a?(Array) -%>
WantedBy=<%= @mnt_wantedby.join(',') %>
<% else -%>
WantedBy=<%= @mnt_wantedby %>
<% end -%>
<% end -%>
<% end -%>
