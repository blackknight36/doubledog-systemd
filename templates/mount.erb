<%#
This file is part of the doubledog-systemd Puppet module.
Copyright 2013-2019 John Florian
SPDX-License-Identifier: GPL-3.0-or-later
-%>
[Unit]
Description=mount <%= @mnt_description %>
<% if defined?(@mnt_requires) -%>
<% if @mnt_requires.is_a?(Array) -%>
Requires=<%= @mnt_requires.join(' ') %>
<% else -%>
Requires=<%= @mnt_requires %>
<% end -%>
<% end -%>
<% if defined?(@mnt_before) -%>
<% if @mnt_before.is_a?(Array) -%>
Before=<%= @mnt_before.join(' ') %>
<% else -%>
Before=<%= @mnt_before %>
<% end -%>
<% end -%>
<% if defined?(@mnt_after) -%>
<% if @mnt_after.is_a?(Array) -%>
After=<%= @mnt_after.join(' ') %>
<% else -%>
After=<%= @mnt_after %>
<% end -%>
<% end -%>
<% if defined?(@mnt_conflicts) -%>
<% if @mnt_conflicts.is_a?(Array) -%>
Conflicts=<%= @mnt_conflicts.join(' ') %>
<% else -%>
Conflicts=<%= @mnt_conflicts %>
<% end -%>
<% end -%>
<% if defined?(@mnt_default_dependencies) -%>
DefaultDependencies=<%= @mnt_default_dependencies %>
<% end -%>

[Mount]
What=<%= @mnt_what %>
Where=<%= @mnt_where %>
<% if defined?(@mnt_type) -%>
Type=<%= @mnt_type %>
<% end -%>
<% if defined?(@mnt_options) -%>
<% if @mnt_options.is_a?(Array) -%>
Options=<%= @mnt_options.join(',') %>
<% else -%>
Options=<%= @mnt_options %>
<% end -%>
<% end -%>
<% if defined?(@mnt_directorymode) -%>
DirectoryMode=<%= @mnt_directorymode %>
<% end -%>
<% if defined?(@mnt_timeoutsec) -%>
TimeoutSec=<%= @mnt_timeoutsec %>
<% end -%>

<% if defined?(@enable) -%>
[Install]
<% if defined?(@mnt_wantedby) -%>
<% if @mnt_wantedby.is_a?(Array) -%>
WantedBy=<%= @mnt_wantedby.join(',') %>
<% else -%>
WantedBy=<%= @mnt_wantedby %>
<% end -%>
<% end -%>
<% end -%>
